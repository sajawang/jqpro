<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="http://localhost/webpro/css/public.css">
<script src="../js/jquery-3.7.1.js"></script>
<script type="text/javascript">

function login(username){
	
	return new Promise( (resolve,reject)=>{
		setTimeout( ()=>{
			if(username){
				resolve(username)
			} else {
				reject(new Error("이름을 입력하세요"))
			}
		},1000)
	})
}


/* login('철수').then((user) =>{
	console.log(`${user}님 환영합니다`)
} )

.catch( err ={
	console.log(err)
}) */

function addToCart(product){
	return new Promise( (resolve, reject) => {
		setTimeout ( ()=> {
			if(product){
				resolve(product)
			} else {
				reject(new Error("상품이 없어요"))
			}
		},1000)
	})
}

/* const promi = addToCart("딸기");
promi.then(data=>{
	
}) */

/* addToCart("딸기").then(prod=>{
	console.log(`${prod}를 장바구니에 `)
}).catch(err={
	console.log(err)
}) */

function makePayment(cardNo,product){
	return new Promise( (resolve, reject) =>{
		
		setTimeout( () =>{
			
			if(cardNo.length != 12){
				reject( new Error("잘못된 카드 번호입니다."))
				return;
			}
			
			if(!product){
				reject( new Error("상품을 넣어주세요"))
				return;
			}
			
			resolve(product);
		},1000)
	})	
}

/* 
makePayment('12341234',"딸기")
.then(data=>{
	console.log(`${data}를 결제했습니다.`)
}).catch(err=>{
	console.log(err)
}) */

const proc1 = ()=>{
	login("철수")
	.then(user=>{
		console.log(`${user}님 환영합니다`)
		return addToCart("딸기")
	}).then(prod=>{
		console.log(`${prod}를 장바구니에 넣었어요`)
		return makePayment("123412341234",prod)
	}).then(prod =>{
		console.log(`${prod}를 결제했습니다.`)
	}).catch(err =>{
		console.log(err)
	})
	
}

</script>
</head>
<body>

<div class="box">
  <h3></h3>
   <input type="button" value="확인" onclick="proc1()">
  <br>
   <div id="result1"></div>
</div>
</body>
</html>














































