<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="http://localhost/webpro/css/public.css">
<script src="../js/jquery-3.7.1.js"></script>

<script type="text/javascript">

const xhr = new XMLHttpRequest();
 $(()=>{
	//비동기 post
	 $('#asynpost').on('click',()=>{
		//입력한 값을 가져온다 - id속성 이용
		 vname=$('#namep').val().trim();
		 vtel=$('#telp').val().trim();
		 
		 //요청
		 data='name='+vname+'&tel='+vtel;
		 xhr.open('post','test1.jsp',true);
		 xhr.setRequestHeader('content-type','application/x-www-form-urlencoded');
		 xhr.send(data);
		 
		 //응답
		 xhr.onload=function(){
			 if(this.readyState==4 && this.status ==200){
				 res = this.responseText;
				 $('#result2').html(res);
			 }
		 }
	 })
	 
	 
	 $('#asynb').on('click',()=>{
		 
		 //name속성을 이용
		/*  vname=document.ff1.name.value;
		 vtel=document.ff1.tel.value;
		 console.log(vname,vtel); */
		
		 //입력한 값을 가져온다 - id속성 이용
		 vname=$('#name').val().trim();
		 vtel=$('#tel').val().trim();
		 
		 //서버로 전송
		 xhr.open('get','test1.jsp?name='+vname+'&tel='+vtel,true);
		 xhr.send();
		 
		 //응답
		 xhr.onreadystatechange=function(){
			 alert(this.readyState);
			 
			 if(this.readyState == 4 && this.status ==200){
				 res=this.responseText;
				 $('#result1').html(res);
			 }
		 }
	 })
 })
 
 
</script>
</head>
<body>

<div class="box">
  <h3>
  1.비동기 XMLHttpRequest-get방식
  </h3>
  <br>
   <form id="ff1" name="ff1" action="test1.jsp" method="get">
        이름 <input type="text" name="name" id="name"><br>
         전화번호<input type="text" name="tel" id="tel"><br>
   
   <input type="submit" value="동기방식">
   <input type="button" value="비동기방식" id="asynb">
   </form>
	<br>  
   <div id="result1"></div>
</div>


<div class="box">
  <h3>
  2.비동기 XMLHttpRequest-post방식
  </h3>
  <br>
   <form id="ff1" name="ff1" action="test1.jsp" method="post">
        이름 <input type="text" name="name" id="namep"><br>
         전화번호<input type="text" name="tel" id="telp"><br>
   
   <input type="submit" value="동기방식">
   <input type="button" value="비동기방식" id="asynpost">
   </form>
	<br>  
   <div id="result2"></div>
</div>
</body>
</html>